import{_ as L}from"./nuxt-link.358d36e6.js";import{_ as N}from"./ArticesList.c968b346.js";import{a as q,y as E,H as o,N as z,z as B,C as g,b as n,u as a,a3 as V,a4 as P,a1 as v,a6 as T,E as $,o as c,w as b,a7 as x,X as k}from"./entry.4ac9bf6f.js";/* empty css                        */import"./index.f2cd822c.js";const D={key:0,class:"tags_container"},F={class:"shadow-xl rounder-xl p-1.5 opacity-80"},G={class:"shadow-xl rounder-xl"},H={key:1,class:"artices_container"},I={key:0,class:"fenye"},M={__name:"tags",setup(R){const h=E(),e=o(h.query.key);console.log(e.value);const _=o(1),u=o(6),m=o(0),i=o([]),y=o([]);z(()=>{e.value?p():f()}),B(()=>h.query,t=>{console.log("xin",t),e.value=t.key,e.value?p():f()});const p=async()=>{const t=await g("/posts").where({tags:{$contains:e.value}}).sort({date:-1}).find();console.log("总文章数",t.length),m.value=t.length,i.value=await g("/posts").where({tags:{$contains:e.value}}).sort({date:-1}).skip((_.value-1)*u.value).limit(u.value).find(),console.log("标签文章数据",i.value)},f=async()=>{const t=await g("/posts").find()||[];let s={};console.log("所有文章数据",t),t.forEach(({tags:l})=>{l&&Array.isArray(l)&&l.forEach(r=>{s[r]?s[r]++:s[r]=1})}),console.log("tags",s),y.value=s},w=t=>{_.value=t,p()};return(t,s)=>{const l=L,r=N,C=$("el-pagination");return c(),n("div",null,[a(e)?(c(),n("div",H,[v(r,{data:a(i)},null,8,["data"]),a(i).length!==0?(c(),n("div",I,[v(C,{layout:"prev, pager, next","page-size":a(u),total:a(m),"hide-on-single-page":!0,"current-page":a(_),onCurrentChange:w},null,8,["page-size","total","current-page"])])):T("",!0)])):(c(),n("div",D,[(c(!0),n(V,null,P(a(y),(A,d)=>(c(),n("div",{class:"tags_item",key:d},[v(l,{to:{path:"/tags",query:{key:d}}},{default:b(()=>[x("span",F,k(d),1),x("span",G,k(A),1)]),_:2},1032,["to"])]))),128))]))])}}},O=q(M,[["__scopeId","data-v-de47d471"]]);export{O as default};
