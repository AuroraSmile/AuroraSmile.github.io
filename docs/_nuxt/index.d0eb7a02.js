import{_ as N}from"./ArticesList.c968b346.js";/* empty css                       */import{a as P,i as b,H as p,z,u as s,o as _,b as d,a7 as r,X as m,a6 as y,af as $,ag as w,U as f,a1 as h,C}from"./entry.4ac9bf6f.js";import{u as x}from"./asyncData.9d38dc3f.js";import"./nuxt-link.358d36e6.js";/* empty css                        */import"./index.f2cd822c.js";const B=l=>($("data-v-099255cf"),l=l(),w(),l),I={key:0,class:"pagination_container"},A={style:{display:"flex"}},D={class:"page-box"},O=B(()=>r("span",{style:{margin:"0px 1px"}},"/",-1)),V={__name:"pagination",props:{pageSize:{type:Number,default:1},total:{type:Number,default:0},hideOnSinglePage:{type:Boolean,default:!1},currentPage:{type:Number,default:1}},emits:["prevClick","nextClick","currentChange"],setup(l,{emit:t}){const n=l,o=b(()=>Math.ceil(n.total/n.pageSize)),e=p(n.currentPage);z(e,a=>{console.log("curpageChange",a),t("currentChange",a)});const i=a=>{e.value!=1&&(e.value=e.value+a,console.log("prevClick",e.value),t("prevClick",e.value))},u=a=>{e.value!==o.value&&(e.value=e.value+a,console.log("nextClick",e.value),t("nextClick",e.value))};return(a,c)=>s(o)!==1||!l.hideOnSinglePage?(_(),d("div",I,[r("div",A,[r("div",{class:"prev",onClick:c[0]||(c[0]=g=>i(-1))},"prev"),r("div",D,[r("span",null,m(s(e)),1),O,r("span",null,m(s(o)),1)]),r("div",{class:"next",onClick:c[1]||(c[1]=g=>u(1))},"next")])])):y("",!0)}},q=P(V,[["__scopeId","data-v-099255cf"]]),E={key:0,class:"fenye"},J={__name:"index",async setup(l){let t,n;const o=p(1),e=p(10),{data:i}=([t,n]=f(()=>x("total",()=>C("/posts").find())),t=await t,n(),t);console.log("总文章数",i.value.length);const u=p(i.value.length),{data:a,refresh:c}=([t,n]=f(()=>x("postpage",()=>(console.log("当前页数",o.value),C("/posts").sort({date:-1}).skip((o.value-1)*e.value).limit(e.value).find()))),t=await t,n(),t);console.log("所有文章数据",a);const g=v=>{o.value=v,c(),console.log("文章数据",a)};return(v,H)=>{const k=N,S=q;return _(),d("div",null,[h(k,{data:s(a)},null,8,["data"]),s(a).length!==0?(_(),d("div",E,[h(S,{"page-size":s(e),total:s(u),"current-page":s(o),"hide-on-single-page":!0,onCurrentChange:g},null,8,["page-size","total","current-page"])])):y("",!0)])}}};export{J as default};
